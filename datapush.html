<!DOCTYPE html>
<head>
  <title>Pusher Test</title>
  <script src="https://js.pusher.com/4.0/pusher.min.js"></script>
</head>

<body>
    <p id="text"></p>
</body>

 <script>
    function httpGet(theUrl)
    {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", theUrl, false );
        xmlHttp.send( null );
        return xmlHttp.responseText;
    }

    var pusher = new Pusher('ba783ca2fe210d40dbd6', {
      cluster: 'eu',
      encrypted: true
    });

    document.getElementById('text').textContent = JSON.parse(httpGet("https://moodlebox.us/api/users/count")).count;

    var channel = pusher.subscribe('my-channel');
    channel.bind('my-event', function(data) {
        var d = new Date();
      document.getElementById('text').textContent = data.message;
    });
  </script>

  <style>/*NB! Kuna tegemist on ajutise võttega, siis siin jätsin css samasse faili. Kutsutan peale punktide saamist terve faili ära*/
    * {
        background: #30333B;
    }
    p {
        color: white;
        font-family: Helvetica;
        font-size: 150px;
        margin: 100px;
    }
  </style>